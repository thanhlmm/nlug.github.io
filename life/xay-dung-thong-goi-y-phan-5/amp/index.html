<!doctype html>
<html amp lang="vi">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no">
		<title>Xây dựng hệ thống “Gợi ý…” (Phần 5) - Blog của CuThanh</title>
		<link rel="canonical" href="/life/xay-dung-thong-goi-y-phan-5" />
		<script src="https://cdn.ampproject.org/v0.js" async></script>
			<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Merriweather:400,400italic,700,700italic">
		<style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
		<script type="application/ld+json">{"@context":"http:\/\/schema.org","@type":"BlogPosting","mainEntityOfPage":"http:\/\/cuthanh.com\/life\/xay-dung-thong-goi-y-phan-5","publisher":{"@type":"Organization","name":"Blog c\u1ee7a CuThanh","logo":{"@type":"ImageObject","url":"http:\/\/cuthanh.com\/wp-content\/uploads\/2016\/07\/cropped-logo-icon-lg-32x32.png","height":32,"width":32}},"headline":"X\u00e2y d\u1ef1ng h\u1ec7 th\u1ed1ng \u201cG\u1ee3i \u00fd\u2026\u201d (Ph\u1ea7n 5)","datePublished":"2016-08-18T23:41:40+00:00","dateModified":"2016-08-20T15:39:36+00:00","author":{"@type":"Person","name":"Minh Th\u00e0nh"},"image":{"@type":"ImageObject","url":"http:\/\/cuthanh.com\/wp-content\/uploads\/2016\/08\/scott.jpg","width":960,"height":640}}</script>
		<style amp-custom>
		/* Generic WP styling */

.alignright {
	float: right;
}

.alignleft {
	float: left;
}

.aligncenter {
	display: block;
	margin-left: auto;
	margin-right: auto;
}

.amp-wp-enforced-sizes {
	/** Our sizes fallback is 100vw, and we have a padding on the container; the max-width here prevents the element from overflowing. **/
	max-width: 100%;
	margin: 0 auto;
}

.amp-wp-unknown-size img {
	/** Worst case scenario when we can't figure out dimensions for an image. **/
	/** Force the image into a box of fixed dimensions and use object-fit to scale. **/
	object-fit: contain;
}

/* Template Styles */

.amp-wp-content,
.amp-wp-title-bar div {
		margin: 0 auto;
	max-width: 700px;
	}

html {
	background: #0a89c0;
}

body {
	background: #fff;
	color: #353535;
	font-family: 'Merriweather', 'Times New Roman', Times, Serif;
	font-weight: 300;
	line-height: 1.75em;
}

p,
ol,
ul,
figure {
	margin: 0 0 1em;
	padding: 0;
}

a,
a:visited {
	color: #0a89c0;
}

a:hover,
a:active,
a:focus {
	color: #353535;
}

/* Quotes */

blockquote {
	color: #353535;
	background: rgba(127,127,127,.125);
	border-left: 2px solid #0a89c0;
	margin: 8px 0 24px 0;
	padding: 16px;
}

blockquote p:last-child {
	margin-bottom: 0;
}

/* UI Fonts */

.amp-wp-meta,
.amp-wp-header div,
.amp-wp-title,
.wp-caption-text,
.amp-wp-tax-category,
.amp-wp-tax-tag,
.amp-wp-comments-link,
.amp-wp-footer p,
.back-to-top {
	font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen-Sans", "Ubuntu", "Cantarell", "Helvetica Neue", sans-serif;
}

/* Header */

.amp-wp-header {
	background-color: #0a89c0;
}

.amp-wp-header div {
	color: #fff;
	font-size: 1em;
	font-weight: 400;
	margin: 0 auto;
	max-width: calc(840px - 32px);
	padding: .875em 16px;
	position: relative;
}

.amp-wp-header a {
	color: #fff;
	text-decoration: none;
}

/* Site Icon */

.amp-wp-header .amp-wp-site-icon {
	/** site icon is 32px **/
	background-color: #fff;
	border: 1px solid #fff;
	border-radius: 50%;
	position: absolute;
	right: 18px;
	top: 10px;
}

/* Article */

.amp-wp-article {
	color: #353535;
	font-weight: 400;
	margin: 1.5em auto;
	max-width: 840px;
	overflow-wrap: break-word;
	word-wrap: break-word;
}

/* Article Header */

.amp-wp-article-header {
	align-items: center;
	align-content: stretch;
	display: flex;
	flex-wrap: wrap;
	justify-content: space-between;
	margin: 1.5em 16px 1.5em;
}

.amp-wp-title {
	color: #353535;
	display: block;
	flex: 1 0 100%;
	font-weight: 900;
	margin: 0 0 .625em;
	width: 100%;
}

/* Article Meta */

.amp-wp-meta {
	color: #696969;
	display: inline-block;
	flex: 2 1 50%;
	font-size: .875em;
	line-height: 1.5em;
	margin: 0;
	padding: 0;
}

.amp-wp-article-header .amp-wp-meta:last-of-type {
	text-align: right;
}

.amp-wp-article-header .amp-wp-meta:first-of-type {
	text-align: left;
}

.amp-wp-byline amp-img,
.amp-wp-byline .amp-wp-author {
	display: inline-block;
	vertical-align: middle;
}

.amp-wp-byline amp-img {
	border: 1px solid #0a89c0;
	border-radius: 50%;
	position: relative;
	margin-right: 6px;
}

.amp-wp-posted-on {
	text-align: right;
}

/* Featured image */

.amp-wp-article-featured-image {
	margin: 0 0 1em;
}
.amp-wp-article-featured-image amp-img {
	margin: 0 auto;
}
.amp-wp-article-featured-image.wp-caption .wp-caption-text {
	margin: 0 18px;
}

/* Article Content */

.amp-wp-article-content {
	margin: 0 16px;
}

.amp-wp-article-content ul,
.amp-wp-article-content ol {
	margin-left: 1em;
}

.amp-wp-article-content amp-img {
	margin: 0 auto;
}

.amp-wp-article-content amp-img.alignright {
	margin: 0 0 1em 16px;
}

.amp-wp-article-content amp-img.alignleft {
	margin: 0 16px 1em 0;
}

/* Captions */

.wp-caption {
	padding: 0;
}

.wp-caption.alignleft {
	margin-right: 16px;
}

.wp-caption.alignright {
	margin-left: 16px;
}

.wp-caption .wp-caption-text {
	border-bottom: 1px solid #c2c2c2;
	color: #696969;
	font-size: .875em;
	line-height: 1.5em;
	margin: 0;
	padding: .66em 10px .75em;
}

/* AMP Media */

amp-carousel {
	background: #c2c2c2;
	margin: 0 -16px 1.5em;
}
amp-iframe,
amp-youtube,
amp-instagram,
amp-vine {
	background: #c2c2c2;
	margin: 0 -16px 1.5em;
}

.amp-wp-article-content amp-carousel amp-img {
	border: none;
}

amp-carousel > amp-img > img {
	object-fit: contain;
}

.amp-wp-iframe-placeholder {
	background: #c2c2c2 url( /wp-content/plugins/amp/assets/images/placeholder-icon.png) no-repeat center 40%;
	background-size: 48px 48px;
	min-height: 48px;
}

/* Article Footer Meta */

.amp-wp-article-footer .amp-wp-meta {
	display: block;
}

.amp-wp-tax-category,
.amp-wp-tax-tag {
	color: #696969;
	font-size: .875em;
	line-height: 1.5em;
	margin: 1.5em 16px;
}

.amp-wp-comments-link {
	color: #696969;
	font-size: .875em;
	line-height: 1.5em;
	text-align: center;
	margin: 2.25em 0 1.5em;
}

.amp-wp-comments-link a {
	border-style: solid;
	border-color: #c2c2c2;
	border-width: 1px 1px 2px;
	border-radius: 4px;
	background-color: transparent;
	color: #0a89c0;
	cursor: pointer;
	display: block;
	font-size: 14px;
	font-weight: 600;
	line-height: 18px;
	margin: 0 auto;
	max-width: 200px;
	padding: 11px 16px;
	text-decoration: none;
	width: 50%;
	-webkit-transition: background-color 0.2s ease;
			transition: background-color 0.2s ease;
}

/* AMP Footer */

.amp-wp-footer {
	border-top: 1px solid #c2c2c2;
	margin: calc(1.5em - 1px) 0 0;
}

.amp-wp-footer div {
	margin: 0 auto;
	max-width: calc(840px - 32px);
	padding: 1.25em 16px 1.25em;
	position: relative;
}

.amp-wp-footer h2 {
	font-size: 1em;
	line-height: 1.375em;
	margin: 0 0 .5em;
}

.amp-wp-footer p {
	color: #696969;
	font-size: .8em;
	line-height: 1.5em;
	margin: 0 85px 0 0;
}

.amp-wp-footer a {
	text-decoration: none;
}

.back-to-top {
	bottom: 1.275em;
	font-size: .8em;
	font-weight: 600;
	line-height: 2em;
	position: absolute;
	right: 16px;
}
		/* Inline styles */
.amp-wp-inline-934605138b205d4a9871e64b928b79b8{text-decoration:underline;}.amp-wp-inline-2f0158eb062d1ac553a7edcb8a744628{text-align:center;}	</style>
</head>

<body class="">

<header id="#top" class="amp-wp-header">
	<div>
		<a href="/">
							<amp-img src="/wp-content/uploads/2016/07/cropped-logo-icon-lg-32x32.png" width="32" height="32" class="amp-wp-site-icon"></amp-img>
						Blog của CuThanh		</a>
	</div>
</header>

<article class="amp-wp-article">

	<header class="amp-wp-article-header">
		<h1 class="amp-wp-title">Xây dựng hệ thống “Gợi ý…” (Phần 5)</h1>
				<div class="amp-wp-meta amp-wp-byline">
					<amp-img src="http://0.gravatar.com/avatar/92d8de5bc1aae1250a02b1f37b92751b?s=24&#038;d=mm&#038;r=g" width="24" height="24" layout="fixed"></amp-img>
				<span class="amp-wp-author author vcard">Minh Thành</span>
	</div>
<div class="amp-wp-meta amp-wp-posted-on">
	<time datetime="2016-08-18T23:41:40+00:00">
		1 năm ago	</time>
</div>
	</header>

	
	<div class="amp-wp-article-content">
		<p>Hế looooooooooooo <amp-img class="emoticons amp-wp-enforced-sizes" src="/wp-content/uploads/lm-easy-emoticons/emoticons-custom/a2b20fedb8f910c6d52ffeb6a30af1b8.png" alt="" width="32" height="32" sizes="(min-width: 32px) 32px, 100vw"></amp-img></p>
<p>Bài này là phần cuối trong series mình viết sẽ nói về thuật toán, kỹ thuật khi xây dựng một hệ thống gợi ý…</p>
<ul><li><a href="/nodejs/xay-dung-he-thong-goi-y-phan-1">Phần 1</a></li>
<li><a href="/nodejs/xay-dung-thong-goi-y-phan-2" target="_blank">Phần 2</a></li>
<li><a href="/nodejs/xay-dung-thong-goi-y-phan-3" target="_blank">Phần 3</a></li>
<li><a href="/nodejs/xay-dung-thong-goi-y-phan-4" target="_blank">Phần 4</a></li>
</ul><p><amp-img class="aligncenter size-full wp-image-530 amp-wp-enforced-sizes" src="/wp-content/uploads/2016/08/scott.jpg" alt="scott" width="960" height="640" srcset="/wp-content/uploads/2016/08/scott.jpg 960w, /wp-content/uploads/2016/08/scott-300x200.jpg 300w, /wp-content/uploads/2016/08/scott-768x512.jpg 768w" sizes="(min-width: 700px) 700px, 100vw"></amp-img></p>
<p class="amp-wp-inline-2f0158eb062d1ac553a7edcb8a744628"><em>Mẹ thằng WordPress sao update xong không thêm Feature Image được <amp-img class="emoticons amp-wp-enforced-sizes" src="/wp-content/uploads/lm-easy-emoticons/emoticons-custom/0dd17a12d85d368fd9f09090b1a961a7.png" alt="" width="32" height="32" sizes="(min-width: 32px) 32px, 100vw"></amp-img></em></p>
<h1>Thuật toán</h1>
<p>Không biết các bạn nhận ra một điều gì đấy khác biệt giữa 2 thuật toán mà mình đề suất hôm nọ hay không. Còn mình thì phát hiện ra… cả 2 là 1.</p>
<p>Không tin ư?</p>
<p>Trở lại VD hôm bữa nhé</p>
<p><em><code>U1 = {mystique, sói}</code></em></p>
<p><em><code>U2 = {mystique, sói, scott}</code></em></p>
<p><em><code>U3 = {sói, scott}</code></em></p>
<p>Có 3 Xmen với sở thích nêu trên, mình sẽ tìm gợi ý cho <code>U1</code> nhé</p>
<p>Độ giống nhau của</p>
<ul><li><code>U1 và U2 là 2/3</code></li>
<li><code>U1 và U3 là 1/3</code></li>
</ul><p><span class="amp-wp-inline-934605138b205d4a9871e64b928b79b8">Theo thuật toán 1:</span></p>
<p><code>U2</code> sẽ gợi ý <code>Scott</code> cho <code>U1</code> với số điểm là <code>2/3</code></p>
<p><code>U3</code> sẽ gợi ý <code>Scott</code> cho <code>U2</code> với số điểm là <code>1/3</code></p>
<p>Vậy tổng điểm <code>Scott</code> nhận được là <code>1</code></p>
<p><span class="amp-wp-inline-934605138b205d4a9871e64b928b79b8">Theo thuật toán 2:</span></p>
<p>Minh nhắc lại công thức xíu</p>
<blockquote><p><strong>Mức độ Thanh niên X nào đây có thích Thanh niên K</strong> nào không theo công thức</p>
<p><code>P(X, K) = Z / M</code></p>
<p>Trong đó <code>P(X, K)</code> là công thức tính mức điểm Thanh niên X có thích Thanh niên K. <strong><code>Z</code></strong> là <strong>tổng điểm giống nhau của X với tất cả mọi người trong đội X-Men cũng “thả tim” thằng K</strong>. <strong><code>M</code></strong> là <strong>tổng số người thích K trong đội X-Men</strong>. Và tất nhiên, giá trị của <code>P(X, K)</code> cũng chạy từ 0 tới 1.</p></blockquote>
<p>Ta tính được</p>
<p><code>Z = 2/3 + 1/3 = 1</code></p>
<p><code>M = 1 + 1 = 2</code></p>
<p>Vậy <code>P(U1, Scott) = 1/2</code></p>
<p>So sánh hai kết quả nhé. Giống nhau số 1 <amp-img class="emoticons amp-wp-enforced-sizes" src="/wp-content/uploads/lm-easy-emoticons/emoticons-custom/a729827d07c2862258711bdba931e289.png" alt="" width="32" height="32" sizes="(min-width: 32px) 32px, 100vw"></amp-img>. Thần kìa chưa !!! Mình không đùa đâu, nó giống nhau ở số 1 đấy! Thuật toán 1 khác với thuật toán 2 chỉ ở chỗ “Chia cho tổng số người thích K trong đội X-Men”, điều này dẫn tới số điểm của công thức 2 sẽ chỉ chạy từ 0 đến 1. Và 2 công thức là hoàn toàn gần giống nhau, tức là ánh xạ 1 – 1 theo 1 hàm tăng.</p>
<p>Vì vậy cả 2 công thức đều cho kết quả, thứ tự giống nhau. Tuy nhiên mình sẽ sử dụng thuật toán 1 của mình. Tại sao? tại vì thuật toán có lưu lại số điểm giống nhau của U1 với tất cả Xmen, thuật toán 2 chỉ lưu lại điểm gợi ý thôi. Điều đấy có ý nghĩa gì? Đơn giản bởi vì: Nếu bạn và một người lạ mà bạn không biết, cả hai có chỉ số giống nhau khá cao, chúng ta dễ dàng kết luận được 1 điều: Bạn và người lạ đấy có thể “yêu” nhau!</p>
<h1>Tối ưu</h1>
<p>Theo như tài liệu mình đọc, và cũng như một bạn góp ý ở Kipalog thì mỗi khi Xmen cập nhật một hành động gì đấy thì update lại tất cả các thông số giống nhau, điểm gợi ý vào Data. Mình vẫn chưa hiểu tại sao lại làm như vậy, không thấy nó tốn thời gian hơn hả nhỉ? Phải tính lại tất cả, xong lưu ngược lài vào DB. Thử nghĩ chúng ta có cả trăm Xmen thì tính tới bao giờ? Data phình chứa cả đống số khó hiểu?  Theo mình thì khi nào cần gợi ý rồi mới tính cho nó nhẹ nhàng. Mình không nói cái nào tốt hơn nhé, mỗi cái sẽ có ưu điểm riêng mà mình chưa tìm thấy <amp-img class="emoticons amp-wp-enforced-sizes" src="/wp-content/uploads/lm-easy-emoticons/emoticons-custom/1a5e76df614241c5f0257f9bb3d73b19.png" alt="" width="32" height="32" sizes="(min-width: 32px) 32px, 100vw"></amp-img>. Các bạn tìm giúp mình xem cái nào ngon hơn nhé <amp-img class="emoticons amp-wp-enforced-sizes" src="/wp-content/uploads/lm-easy-emoticons/emoticons-custom/4e8a1167e4ebd4920705549439e77db2.png" alt="" width="32" height="32" sizes="(min-width: 32px) 32px, 100vw"></amp-img>.</p>
<p>Nói tiếp tới Big Data,  nếu cả trăm, cả ngàn Xmen thì tính tới bao giờ? Thuật toán tuy đơn giản, nhưng phải chạy vòng vèo trong vòng lặp, array nến chắc chắn sẽ lâu đấy. Tác giả bài viết mình tham khảo có gợi ý là:</p>
<p>Chúng ta chỉ cần tìm gợi ý trong một tập Xmen lân cận thôi. Hoặc một tập mà bạn cảm thấy tối ưu nhất. Đương nhiên, cách tìm được tập tối ưu thì các bạn tự vắt óc suy nghĩ đi nhé <amp-img class="emoticons amp-wp-enforced-sizes" src="/wp-content/uploads/lm-easy-emoticons/emoticons-custom/6ef225eb223b6df4166606abf92bde83.png" alt="" width="32" height="32" sizes="(min-width: 32px) 32px, 100vw"></amp-img>.</p>
<p>Ngoài ra còn áp dụng các kĩ thuật cache và sử dụng ngôn ngữ khác, theo mình biết Nodejs không tối ưu trong việc tính toán, Golang có thể tốt hơn <amp-img class="emoticons amp-wp-enforced-sizes" src="/wp-content/uploads/lm-easy-emoticons/emoticons-custom/3182d42b9326c68c9a456df369ea9898.png" alt="" width="32" height="32" sizes="(min-width: 32px) 32px, 100vw"></amp-img>.</p>
<p> </p>
<h1>Kết</h1>
<p>Công thức suyên suốt series <strong>Xây dựng hệ thống “gợi ý…”</strong> này chỉ là cực kì đơn giản, nhưng nó giúp bạn đặt nền móng về ý tưởng sử dụng toán tập hợp, cách xây dựng một dự án mà theo kinh nghiệm cá nhân mình xây dựng được đưa lên, mong có chút nào giúp ích cho các bạn không chỉ về việc build một Suggest System mà cả cách hoàn thành một sản phẩm.</p>
<p>Từ trên, các bạn có thể mở rộng ra để tối ưu thuật toán của mình và có thể áp dụng được những mô hình khác nhau. Như ảnh hưởng của giới tính, nơi sinh, cung hoàng đạo <amp-img class="emoticons amp-wp-enforced-sizes" src="/wp-content/uploads/lm-easy-emoticons/emoticons-custom/1806c3404f8f66e0435009954ee1379e.png" alt="" width="32" height="32" sizes="(min-width: 32px) 32px, 100vw"></amp-img> chẳng hạn.</p>
<p>Là một lập trình viên, theo mình nghĩ nếu muốn nâng đến tầm “siêu phàm” thì thuật toán và tầm nhìn là tầng cao nhất, gọi đấy là một ngành khoa học chứ không chỉ đơn thuần là code. Nhìn Google, Facebook xem, nếu không có thuật toán sắp xếp kết quả tìm kiếm, sắp xếp New Feed, gợi ý kết bạn thì nó có thể còn người sử dụng đến bây giờ không. Nhìn xem người người đổ xô đi làm SEO mong sao thuật toán nó chấm cho mình điểm cao cao <amp-img class="emoticons amp-wp-enforced-sizes" src="/wp-content/uploads/lm-easy-emoticons/emoticons-custom/111e40af5c869c33eec3a6a746831cbc.png" alt="" width="32" height="32" sizes="(min-width: 32px) 32px, 100vw"></amp-img></p>
<p>Cảm ơn các bạn đã chịu khó đọc bài viết của mình. Chào thân ái và quyết thắng <amp-img class="emoticons amp-wp-enforced-sizes" src="/wp-content/uploads/lm-easy-emoticons/emoticons-custom/9ea612b30dc12f06939a01c96f151dc3.png" alt="" width="32" height="32" sizes="(min-width: 32px) 32px, 100vw"></amp-img></p>
	</div>

	<footer class="amp-wp-article-footer">
			<div class="amp-wp-meta amp-wp-tax-category">
		Categories: <a href="/category/life" rel="category tag">Life</a>	</div>

	<div class="amp-wp-meta amp-wp-tax-tag">
		Tags: <a href="/tag/big-data" rel="tag">big data</a>, <a href="/tag/goi-y" rel="tag">gợi ý</a>, <a href="/tag/thuat-toan" rel="tag">thuật toán</a>, <a href="/tag/toi-uu" rel="tag">tối ưu</a>, <a href="/tag/xay-dung" rel="tag">xây dựng</a>	</div>
		<div class="amp-wp-meta amp-wp-comments-link">
		<a href="/life/xay-dung-thong-goi-y-phan-5#comments">
			Leave a Comment		</a>
	</div>
	</footer>

</article>

<footer class="amp-wp-footer">
	<div>
		<h2>Blog của CuThanh</h2>
		<p>
			<a href="https://wordpress.org/">Powered by WordPress</a>
		</p>
		<a href="#top" class="back-to-top">Back to top</a>
	</div>
</footer>

	<amp-pixel src="https://pixel.wp.com/g.gif?v=ext&#038;j=1%3A4.5&#038;blog=114130900&#038;post=528&#038;tz=7&#038;srv=cuthanh.com&#038;host=cuthanh.com&#038;rand=RANDOM&#038;ref=DOCUMENT_REFERRER"></amp-pixel>
	
</body>
</html>
