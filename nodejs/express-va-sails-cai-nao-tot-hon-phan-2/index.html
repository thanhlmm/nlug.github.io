<!DOCTYPE html>
<html lang="vi" prefix="og: http://ogp.me/ns#">
<head>
	<meta charset="UTF-8" />
	<title>Express và Sails? Cái nào tốt hơn (Phần 2) - Blog của CuThanh</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<link rel="pingback" href="/xmlrpc.php" />

	<!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
	<!--[if lt IE 9]>
		<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
		<script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
	<![endif]-->

	<!-- W3TC-include-js-head -->
	
<!-- This site is optimized with the Yoast SEO plugin v4.1 - https://yoast.com/wordpress/plugins/seo/ -->
<meta name="description" content="Chào mừng các bạn tới với phần 2. Trong phần này mình sẽ so sánh về xây dựng một Web App chung trong một source code."/>
<meta name="robots" content="noodp"/>
<link rel="canonical" href="/nodejs/express-va-sails-cai-nao-tot-hon-phan-2" />
<meta property="og:locale" content="vi_VN" />
<meta property="og:type" content="article" />
<meta property="og:title" content="Express và Sails? Cái nào tốt hơn (Phần 2) - Blog của CuThanh" />
<meta property="og:description" content="Chào mừng các bạn tới với phần 2. Trong phần này mình sẽ so sánh về xây dựng một Web App chung trong một source code." />
<meta property="og:url" content="http://cuthanh.com/nodejs/express-va-sails-cai-nao-tot-hon-phan-2" />
<meta property="og:site_name" content="Blog của CuThanh" />
<meta property="article:author" content="https://www.facebook.com/hojjlamthenlug" />
<meta property="article:tag" content="express" />
<meta property="article:tag" content="sails" />
<meta property="article:tag" content="socket.io" />
<meta property="article:tag" content="webapp" />
<meta property="article:section" content="NodeJS" />
<meta property="article:published_time" content="2016-07-20T10:10:45+00:00" />
<meta property="article:modified_time" content="2016-07-20T10:26:24+00:00" />
<meta property="og:updated_time" content="2016-07-20T10:26:24+00:00" />
<meta property="og:image" content="http://cuthanh.com/wp-content/uploads/2016/07/expressvssails.png" />
<meta property="og:image:width" content="1517" />
<meta property="og:image:height" content="626" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:description" content="Chào mừng các bạn tới với phần 2. Trong phần này mình sẽ so sánh về xây dựng một Web App chung trong một source code." />
<meta name="twitter:title" content="Express và Sails? Cái nào tốt hơn (Phần 2) - Blog của CuThanh" />
<meta name="twitter:image" content="http://cuthanh.com/wp-content/uploads/2016/07/expressvssails.png" />
<!-- / Yoast SEO plugin. -->

<link rel='dns-prefetch' href='' />
<link rel='dns-prefetch' href='//s0.wp.com' />
<link rel='dns-prefetch' href='//fonts.googleapis.com' />
<link rel='dns-prefetch' href='//s.w.org' />
<link rel="alternate" type="application/rss+xml" title="Dòng thông tin Blog của CuThanh &raquo;" href="/feed" />
<link rel="alternate" type="application/rss+xml" title="Dòng phản hồi Blog của CuThanh &raquo;" href="/comments/feed" />
<link rel="alternate" type="application/rss+xml" title="Blog của CuThanh &raquo; Express và Sails? Cái nào tốt hơn (Phần 2) Dòng phản hồi" href="/nodejs/express-va-sails-cai-nao-tot-hon-phan-2/feed" />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.3\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.3\/svg\/","svgExt":".svg","source":{"concatemoji":"http:\/\/cuthanh.com\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.8.3"}};
			!function(a,b,c){function d(a){var b,c,d,e,f=String.fromCharCode;if(!k||!k.fillText)return!1;switch(k.clearRect(0,0,j.width,j.height),k.textBaseline="top",k.font="600 32px Arial",a){case"flag":return k.fillText(f(55356,56826,55356,56819),0,0),b=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,56826,8203,55356,56819),0,0),c=j.toDataURL(),b!==c&&(k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447),0,0),b=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447),0,0),c=j.toDataURL(),b!==c);case"emoji4":return k.fillText(f(55358,56794,8205,9794,65039),0,0),d=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55358,56794,8203,9794,65039),0,0),e=j.toDataURL(),d!==e}return!1}function e(a){var c=b.createElement("script");c.src=a,c.defer=c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g,h,i,j=b.createElement("canvas"),k=j.getContext&&j.getContext("2d");for(i=Array("flag","emoji4"),c.supports={everything:!0,everythingExceptFlag:!0},h=0;h<i.length;h++)c.supports[i[h]]=d(i[h]),c.supports.everything=c.supports.everything&&c.supports[i[h]],"flag"!==i[h]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[i[h]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel='stylesheet' id='contact-form-7-css'  href='/wp-content/plugins/contact-form-7/includes/css/styles.css?ver=4.6' type='text/css' media='all' />
<link rel='stylesheet' id='dw-reaction-style-css'  href='/wp-content/plugins/dw-reactions/assets/css/style.css?ver=120004042016' type='text/css' media='all' />
<link rel='stylesheet' id='estilo-css'  href='/wp-content/plugins/simple-code-highlighter/estilo.css?ver=4.8.3' type='text/css' media='all' />
<link rel='stylesheet' id='readable-google-fonts-css'  href='http://fonts.googleapis.com/css?family=Open+Sans%3A400%2C300%2C700&#038;subset=latin%2Cvietnamese&#038;ver=4.8.3' type='text/css' media='all' />
<link rel='stylesheet' id='main-css'  href='/wp-content/themes/readable/assets/stylesheets/main.css?ver=1.0.0' type='text/css' media='all' />
<style id='main-inline-css' type='text/css'>

/******************
Primary theme color
*******************/

.social__container, .search__container, .search-panel .search-panel__text, .navigation > li.current-menu-item > a, .navigation > li:hover > a, .navigation > li.current-menu-ancestor > a, .widget-contact__title, .navigation .sub-menu > li > a:hover, .error .primary-color {
	color: #05668d}

.social .social__dropdown, ::selection, .navbar-toggle {
	background: #05668d}

.wpcf7-submit, .navigation > li > a:after, .btn-primary {
	background: linear-gradient(to bottom, #05668d, #055c7f)
}

blockquote, .wpcf7-submit, .btn-primary, .navbar-toggle {
	border-color: #05668d}

.search__container:hover, .social__container:hover {
	color: #055c7f}

@media (min-width: 992px) {
	.navigation .sub-menu > li > a {
		background: #05668d	}
}

.wpcf7-submit:hover, .btn-primary:hover, .social .social__dropdown li a:hover {
	background: #055c7f}

@media (min-width: 992px) {
	.navigation .sub-menu > li > a:hover {
		background: #055c7f	}
}

.wpcf7-submit:hover, .navigation .sub-menu > li > a, .navigation .sub-menu, .btn-primary:hover, .social .social__dropdown li .social__container {
	border-color: #055c7f}

/******************
Text color
*******************/

blockquote, .post-content, .post-content--narrow, .post-content--narrow span, body .su-tabs-style-default .su-tabs-pane {
	color: #40454a}

/******************
Link color
*******************/

a, .menu li a, .pptwj .pptwj-tabs-wrap .tab-links li a.selected, .pptwj .pptwj-tabs-wrap .tab-links li a:hover, .pptwj .pptwj-tabs-wrap .boxes ul.tab-filter-list li a:hover, .pptwj .pptwj-tabs-wrap .boxes ul.tab-filter-list li a.selected {
	color: #028090}

.widget_tag_cloud a, .tags a {
	border-color: #028090}

a:hover, .menu li a:hover {
	color: #027382}

.widget_tag_cloud a:hover, .tags a:hover, .pptwj .pptwj-tabs-wrap .boxes ul.tab-filter-list li a.selected:after, .pptwj .pptwj-tabs-wrap .boxes ul.tab-filter-list li a:hover:after {
	background-color: #028090}

/******************
Headings dark
*******************/
h1, h1 a, .h1 a, .h2, h2, h2 a, .h2 a, h4, h4 a, .h4 a, h5, h5 a, .h5 a, .zem_rp_title {
	color: #2f343b}

/******************
Headings light
*******************/
h3, h3 a, .h3 a, h6, h6 a, .h6 a, .wp_rp_excerpt {
	color: #9a9a90}

/******************
Navbar background
*******************/
.header {
	background-color: #ffffff}

/******************
Footer background
*******************/
.footer, .copyrights {
	background-color: #ffffff}

/******************
Navbar text color
*******************/

.navigation > li > a {
	color: #9a9a90}

/******************
Navbar dropdown text color
*******************/

@media (min-width: 992px) {
	.navigation .sub-menu > li > a, .navigation .sub-menu > li > a:hover {
		color: #f3f4f4	}
}

/* WP Customizer end */

/* User Custom CSS */

</style>
<link rel='stylesheet' id='jetpack_css-css'  href='/wp-content/plugins/jetpack/css/jetpack.css?ver=4.5' type='text/css' media='all' />
<script type='text/javascript' src='/wp-includes/js/jquery/jquery.js?ver=1.12.4'></script>
<script type='text/javascript' src='/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.4.1'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var related_posts_js_options = {"post_heading":"h4"};
/* ]]> */
</script>
<script type='text/javascript' src='/wp-content/plugins/jetpack/modules/related-posts/related-posts.js?ver=20150408'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var dw_reaction = {"ajax":"http:\/\/cuthanh.com\/wp-admin\/admin-ajax.php"};
/* ]]> */
</script>
<script type='text/javascript' src='/wp-content/plugins/dw-reactions/assets/js/script.js?ver=120004042016'></script>
<link rel='https://api.w.org/' href='/wp-json/' />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="/wp-includes/wlwmanifest.xml" /> 
<meta name="generator" content="WordPress 4.8.3" />
<link rel='shortlink' href='/?p=151' />
<link rel="alternate" type="application/json+oembed" href="/wp-json/oembed/1.0/embed?url=http%3A%2F%2F%2Fnodejs%2Fexpress-va-sails-cai-nao-tot-hon-phan-2" />
<link rel="alternate" type="text/xml+oembed" href="/wp-json/oembed/1.0/embed?url=http%3A%2F%2F%2Fnodejs%2Fexpress-va-sails-cai-nao-tot-hon-phan-2&#038;format=xml" />
			<meta property="fb:pages" content="1230424850325628" />
			
<link rel='dns-prefetch' href='//v0.wordpress.com'>
<style type='text/css'>img#wpstats{display:none}</style>			<link rel="shortcut icon" href="/wp-content/uploads/2016/07/logo-icon.ico">
		<style type="text/css" id="custom-background-css">
body.custom-background { background-image: url("/wp-content/uploads/2016/07/blurred-home-bg.jpg"); background-position: center top; background-size: auto; background-repeat: repeat; background-attachment: fixed; }
</style>
<link rel="amphtml" href="/nodejs/express-va-sails-cai-nao-tot-hon-phan-2/amp" /><link rel="icon" href="/wp-content/uploads/2016/07/cropped-logo-icon-lg-32x32.png" sizes="32x32" />
<link rel="icon" href="/wp-content/uploads/2016/07/cropped-logo-icon-lg-192x192.png" sizes="192x192" />
<link rel="apple-touch-icon-precomposed" href="/wp-content/uploads/2016/07/cropped-logo-icon-lg-180x180.png" />
<meta name="msapplication-TileImage" content="http://cuthanh.com/wp-content/uploads/2016/07/cropped-logo-icon-lg-270x270.png" />

<!-- BEGIN GADWP v4.9.5 Universal Tracking - https://deconf.com/google-analytics-dashboard-wordpress/ -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-79981031-2', 'auto');
  ga('send', 'pageview');
</script>

<!-- END GADWP Universal Tracking -->

			<style type="text/css" id="wp-custom-css">
				/*
Welcome to Custom CSS!

To learn how this works, see http://wp.me/PEmnE-Bt
*/
.hentry .aligncenter {
	margin: 0 auto;
	display: block;
}

.post-content>p {
	text-align: justify;
	text-indent: 1em;
}			</style>
			<!-- W3TC-include-css -->
</head>

<body class="post-template-default single single-post postid-151 single-format-standard custom-background">
<!-- W3TC-include-js-body-start -->

	<!-- Search - Open panel -->
	<div class="search-panel">
		<div class="container">
			<div class="row">
				<div class="col-xs-12">
					<form action="/">
						<input type="text" class="search-panel__form  js--search-panel-text" name="s" placeholder="Begin typing for search">
						<p class="search-panel__text">Press enter to see results or esc to cancel.</p>
					</form>
				</div>
			</div>
		</div>
	</div>

	<div class="page-content-container"><!-- ends in the footer.php -->
		<!-- header -->
		<header class="header  push-down-45">
			<div class="container">
				<div class="logo  pull-left">
					<a href="/">
													<img src="/wp-content/uploads/2016/07/logo-1.png" alt="Blog của CuThanh" />
											</a>
				</div>

				<!-- Brand and toggle get grouped for better mobile display -->
				<div class="navbar-header">
					<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#readable-navbar-collapse">
						<span class="sr-only">Toggle navigation</span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</button>
				</div>
				<nav class="navbar  navbar-default" role="navigation">

					<!-- Collect the nav links, forms, and other content for toggling -->
					<div class="collapse  navbar-collapse" id="readable-navbar-collapse">
						<ul id="menu-my-menu" class="navigation"><li id="menu-item-15" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-15"><a href="/">Trang chủ</a></li>
<li id="menu-item-710" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-710"><a href="/category/technology">Technology</a></li>
<li id="menu-item-711" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-711"><a href="/category/react">React</a></li>
<li id="menu-item-139" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-139"><a href="/category/server">Server</a></li>
<li id="menu-item-140" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-140"><a href="/category/nodejs">NodeJS</a></li>
<li id="menu-item-141" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-141"><a href="/category/startup">Startup</a></li>
<li id="menu-item-136" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-136"><a href="/about">About</a></li>
</ul>					</div><!-- /.navbar-collapse -->
				</nav>
				<div class="hidden-xs  hidden-sm">
					<a href="#" class="search__container  js--toggle-search-mode"> <span class="glyphicon  glyphicon-search"></span>  </a>
										<div class="social">
						<a href="#" class="social__container  js--blank-link"><span class="glyphicon  glyphicon-heart"></span></a>
						<ul class="social__dropdown">
														<li>
								<a href="http://nlug27@gmail.com/" target="_blank" class="social__container"> <span class="zocial-email"></span></a>
							</li>
														<li>
								<a href="https://www.facebook.com/hojjlamthenlug" target="_blank" class="social__container"> <span class="zocial-facebook"></span></a>
							</li>
													</ul>
					</div>
									</div>
			</div>
		</header>
<div class="container">
	<div class="row">
		<div class="col-xs-12" role="main">

			
				<!-- Post with featured image -->
				<article class="boxed push-down-45 post-151 post type-post status-publish format-standard has-post-thumbnail hentry category-nodejs tag-express tag-sails tag-socket-io tag-webapp">

					<div class="meta">

			<a href="/nodejs/express-va-sails-cai-nao-tot-hon-phan-2" class="link--no-border"><img width="1138" height="493" src="/wp-content/uploads/2016/07/expressvssails-1138x493.png" class="attachment-post-thumbnail size-post-thumbnail wp-post-image" alt="" /></a>
	
	
			<div class="meta__container  clearfix">
				<div class="meta__info">
					<span class="meta__author">
						<img alt='' src='http://0.gravatar.com/avatar/92d8de5bc1aae1250a02b1f37b92751b?s=30&#038;d=mm&#038;r=g' srcset='http://0.gravatar.com/avatar/92d8de5bc1aae1250a02b1f37b92751b?s=60&amp;d=mm&amp;r=g 2x' class='avatar avatar-30 photo' height='30' width='30' />						<a href="/author/nlug">Minh Thành</a> in <a href="/category/nodejs" rel="category tag">NodeJS</a>
					</span>
					<time datetime="2016-07-20T10:10:45+00:00" class="meta__date"><a href="/2016/07/20"><span class="glyphicon  glyphicon-calendar"></span> &nbsp; 20/07/2016</a></time>
				</div>
				<div class="meta__comments">
					<a href="/nodejs/express-va-sails-cai-nao-tot-hon-phan-2#respond"><span class="glyphicon  glyphicon-comment"></span>  &nbsp; 0 Comments</a>
				</div>
			</div>

			
</div>


					<!-- Start of the blogpost -->
					<div class="row">
						<div class="col-xs-10  col-xs-offset-1  col-md-8  col-md-offset-2">

							<!-- Start of the content -->
							<div class="post-content">
								<h1 class="post-content__title">
									<a href="/nodejs/express-va-sails-cai-nao-tot-hon-phan-2">Express và Sails? Cái nào tốt hơn (Phần 2)</a>
								</h1>
								<p>Phần 1:<a href="/nodejs/express-va-sails-cai-nao-tot-hon-phan-1"> Express và sails? Cài nào tốt hơn (Phần 1)</a></p>
<p>Chào mừng các bạn tới với phần 2. Trong phần này mình sẽ so sánh về xây dựng một Web App chung trong một source code.</p>
<h1>Webapp chung trong một bộ source code</h1>
<p><em><a href="/nodejs/express-va-sails-cai-nao-tot-hon-phan-1" target="_blank">Trong bài viết hôm trước</a>, mình đã chứng minh cho các bác thấy là <strong>Express</strong> thắng thế nếu các bác muốn xây dựng server và client tách biệt. Vậy nếu xây dựng cả 2 trong một bộ source code thì sao, tức là server của chúng ta không chỉ cung cấp api mà cả client file nữ</em>a.</p>
<h2>Phương thức xây dựng</h2>
<p><span style="text-decoration: underline;"><strong>Cách 1</strong></span>: Ta sẽ serve file tĩnh (static) trong một folder (Y chang như <strong>nginx</strong> đấy các bác).</p>
<p><img class="aligncenter size-full wp-image-162" src="/wp-content/uploads/2016/07/staticexpressnonginx.png" alt="staticexpressnonginx" width="555" height="450" srcset="/wp-content/uploads/2016/07/staticexpressnonginx.png 555w, /wp-content/uploads/2016/07/staticexpressnonginx-300x243.png 300w" sizes="(max-width: 555px) 100vw, 555px" /></p>
<p>Cách này thì chả khác gì tách biệt so với mình nói trong phần 1 nhưng lại dùng <strong>Nodejs</strong> để serve static file. WTF, <strong>Nodejs</strong> đâu có sinh ra để làm việc đấy đâu, việc đấy là của Nginx, Apache,&#8230; cơ mà <img src="/wp-content/uploads/lm-easy-emoticons/emoticons-custom/1806c3404f8f66e0435009954ee1379e.png" alt="" border="0" hspace="5" />. Nodejs có thể serve static file nhưng chắc chắn, chắc chắn không thể nào tối ưu bằng <strong>Nginx</strong> hay <strong>Apache</strong> được.</p>
<p>Mời các bạn đọc bài phân tích ở đây <a href="http://kipalog.com/posts/Cai-thien-toc-do-load-trang-cua-Express---Dung-serve-static-file-bang-nodejs" target="_blank">http://kipalog.com/posts/Cai-thien-toc-do-load-trang-cua-Express&#8212;Dung-serve-static-file-bang-nodejs</a></p>
<p><span style="text-decoration: underline;"><strong>Cách 2</strong></span>: Dùng template engines, nếu dùng theo cách này thì chúng ta sài nodejs giống như kiểu php cổ điển.</p>
<ul>
<li>Lấy data từ DB</li>
<li>Xử lý</li>
<li>Gửi cho template</li>
<li>Render template rồi gửi về cho trình duyệt</li>
</ul>
<p>Đối với mình, <strong>Nodejs</strong> là dùng ngôn ngữ <strong>JavaScript</strong> và nó hoàn toàn có lợi thế rất rất lơn nếu sử lý data thông qua <strong>JSON</strong>.</p>
<blockquote><p><b>JSON</b> (JavaScript Object Noattion) là 1 định dạng hoán vị dữ liệu nhanh. Chúng dễ dàng cho chúng ta đọc và viết. Dễ dàng cho thiết bị phân tích và phát sinh. Chúng là cơ sở dựa trên tập hợp của Ngôn Ngữ Lập Trình <a href="http://javascript.crockford.com/" target="_blank">JavaScript</a>, tiêu chuẩn <a href="http://www.ecma-international.org/publications/files/ecma-st/ECMA-262.pdf">ECMA-262 phiên bản 3 &#8211; tháng 12 năm 1999</a>. JSON là 1 định dạng kiểu text mà hoàn toàn độc lập với các ngôn ngữ hoàn chỉnh, thuộc họ hàng với các ngôn ngữ họ hàng C, gồm có C, C++, C#, Java, JavaScript, Perl, Python, và nhiều ngôn ngữ khác. Những đặc tính đó đã tạo nên JSON 1 ngôn ngữ hoán vị dữ liệu lý tưởng.</p></blockquote>
<p>Vậy tại sao ta không xây dựng <strong>API server</strong>, xuất ra <strong>JSON</strong> không đẹp trai hơn là phải render ra html thả về ah <img src="/wp-content/uploads/lm-easy-emoticons/emoticons-custom/65f51c6b41112ac007ace7cf9f66e15e.png" alt="" border="0" hspace="5" />.</p>
<p>Mình đã nói lên cả 2 cách và đã nêu ra nhược điểm của cả 2. Tuy nhiên nếu bác nào &#8220;Tao thích code như vậy đấy, còn ngon hơn của mày chán <img src="/wp-content/uploads/lm-easy-emoticons/emoticons-custom/ab0f23d06fc786b40bb95a014604743f.png" alt="" border="0" hspace="5" />&#8221; thì đọc tiếp nhé!</p>
<h2>Express</h2>
<p>Nếu muốn làm điều này ở <strong>Express</strong> thì các bác phải cài thêm middleware <code>express.static</code> (cái này có tích hợp sẵn trong core của Express). Vậy là có thể serve static file trong folder mà các bác cấu hình.</p>
<p>Còn nếu muốn dùng template engines thì cài đặt về, thêm vào express rồi chạy. VD với template engines <code>pug</code> nhé(trước đây nó tên là <code>Jade</code>)</p>
<pre class="prettyprint">npm install pug --save</pre>
<p>Load nó vào <strong>express</strong></p>
<pre class="prettyprint">app.set('view engine', 'pug');</pre>
<p>Tạo file template mẫu <code>./view/index.pug</code></p>
<pre class="prettyprint">html
  head
    title= title
  body
    h1= message</pre>
<p>Render chạy thử xem sao nào <img src="/wp-content/uploads/lm-easy-emoticons/emoticons-custom/08c695086534a2344954042d153ad8fd.png" alt="" border="0" hspace="5" /></p>
<pre class="prettyprint">app.get('/', function (req, res) {
  res.render('index', { title: 'Hey', message: 'Hello there!'});
});</pre>
<p><code>node app.js</code> xem thử đi nhé, em lười lắm <img src="/wp-content/uploads/lm-easy-emoticons/emoticons-custom/3182d42b9326c68c9a456df369ea9898.png" alt="" border="0" hspace="5" />.</p>
<p>Cũng không đến nỗi khó khăn, hay dài lắm ha.</p>
<h2>Sails</h2>
<p>Sails thì còn nhanh hơn nữa, nó cài đặt hết cả folder serve static file, cả template engines luôn (Mặc định là <code>EJX</code>).</p>
<p>Muốn serve static file? Thả file vào trong folder <code>./assets</code></p>
<p>Muốn sài template? Thả file template vào folder <code>./views</code></p>
<p>Ez life huh? Sails cũng hỗ trợ <strong>grunt</strong> nên các bác cũng có thể cài đặt, thêm task nào đó,.. Tuy nhiên càng nhiều thì mỗi lần <code>sails lift</code> lại càng rùa bò thêm <img src="/wp-content/uploads/lm-easy-emoticons/emoticons-custom/76e3337135a7b852053b34aadd76ba6d.png" alt="" border="0" hspace="5" /> như trong <a href="/nodejs/express-va-sails-cai-nao-tot-hon-phan-1" target="_blank">phần 1</a> mình đã nói.</p>
<p>Nói đến Web app thì không thể thiếu một phần rất quan trọng đó là <strong>Socket</strong></p>
<blockquote><p><strong>Socket</strong> là một giao thức kết nối giữa 2 thằng server và client. Kết nối này là xuyên suốt, kiểu như thằng này nói cái gì thì thằng kia nghe được vậy. Không như http là client gửi request thì server mới được trả response về. Kết nối socket là hai chiều.</p></blockquote>
<p><img class="aligncenter size-full wp-image-163" src="/wp-content/uploads/2016/07/socketio.png" alt="socketio" width="1116" height="677" srcset="/wp-content/uploads/2016/07/socketio.png 1116w, /wp-content/uploads/2016/07/socketio-300x182.png 300w, /wp-content/uploads/2016/07/socketio-768x466.png 768w, /wp-content/uploads/2016/07/socketio-1024x621.png 1024w" sizes="(max-width: 1116px) 100vw, 1116px" /></p>
<p>Socket thì ứng dụng nhiều thứ lắm game nè, chat nè,.. nói chung là tất cả các thứ dùng realtime thì đều nên nghĩ tới tới socket đầu tiên hết. Và đối với <strong>Nodejs</strong> thì hãy nghĩ tới <a href="http://socket.io/" target="_blank">socket.io</a></p>
<blockquote><p><i class="larger"><a href="http://socket.io/" target="_blank">Socket.IO</a> enables real-time bidirectional event-based communication.</i><br />
<i>It works on every platform, browser or device, focusing equally on reliability and speed.</i></p></blockquote>
<h3>Express</h3>
<p>Đối với <strong>express</strong> thì cũng khá là lăng nhằng. Bạn cài đặt <strong>socket.io</strong>, load vào <strong>Express</strong>, config <strong>Express</strong>, config Client kết nối với <strong>socket.io</strong></p>
<p>Chi tiết</p>
<ul>
<li><a href="http://www.programwitherik.com/socket-io-tutorial-with-node-js-and-express/" target="_blank">http://www.programwitherik.com/socket-io-tutorial-with-node-js-and-express/</a></li>
<li><a href="http://socket.io/docs/" target="_blank">http://socket.io/docs/</a></li>
</ul>
<h3>Sails</h3>
<p>Sails thì nó soạn sẵn cho các bác rồi, include <code>sails.io.js</code> vào client, đọc xíu document là quẩy thôi <img src="/wp-content/uploads/lm-easy-emoticons/emoticons-custom/ab0f23d06fc786b40bb95a014604743f.png" alt="" border="0" hspace="5" /></p>
<p>Chi tiết <a href="http://sailsjs.org/documentation/concepts/realtime" target="_blank">http://sailsjs.org/documentation/concepts/realtime</a></p>
<p>Qua đấy bạn thấy, nếu muốn xây dựng một webapp all-in-source thì sails là Number 1</p>
<h1>Kết luận</h1>
<p>Qua 2 bài viết, chắc các bạn cũng thấy <strong>Express</strong> và <strong>Sails</strong> khác nhau ở chỗ nào.</p>
<p>Nếu muốn xây dựng server và client tách biệt thì hãy dùng <strong>Express</strong> viết api, đơn giản, nhanh gọn, nhẹ.</p>
<p>Nếu muốn xây dựng web app chung vào một bộ source, phức tạp, yêu cầu nhiều chức năng như session, cookie, socket, template,&#8230; thì hãy nghĩ ngay tới <strong>sails</strong>.</p>
<p>Tự nhận thấy loạt bài này chưa hay, chưa rõ ràng nhưng các bác thông cảm cho em <img src="/wp-content/uploads/lm-easy-emoticons/emoticons-custom/78903d5af243d9b72ea6bfe3446fcee9.png" alt="" border="0" hspace="5" />, em sẽ cố găng cho các lần sau <img src="/wp-content/uploads/lm-easy-emoticons/emoticons-custom/4e8a1167e4ebd4920705549439e77db2.png" alt="" border="0" hspace="5" /></p>
		<div class="dw-reactions dw-reactions-post-151" data-type="vote" data-nonce="fe51f46582" data-post="151">
											<div class="dw-reactions-button">
					<span class="dw-reactions-main-button">Like</span>
					<div class="dw-reactions-box">
						<span class="dw-reaction dw-reaction-like"><strong>Like</strong></span>
						<span class="dw-reaction dw-reaction-love"><strong>Love</strong></span>
						<span class="dw-reaction dw-reaction-haha"><strong>Haha</strong></span>
						<span class="dw-reaction dw-reaction-wow"><strong>Wow</strong></span>
						<span class="dw-reaction dw-reaction-sad"><strong>Sad</strong></span>
						<span class="dw-reaction dw-reaction-angry"><strong>Angry</strong></span>
					</div>
				</div>
														<div class="dw-reactions-count">
									</div>
					</div>
		
<div id='jp-relatedposts' class='jp-relatedposts' >
	<h3 class="jp-relatedposts-headline"><em>Có liên quan</em></h3>
</div>
															</div>
							<!-- End of the content -->

							<div class="row">
								<div class="col-xs-12  col-sm-3">
									<!-- Start of comments button -->
									<div class="post-comments">
										<a class="btn  btn-primary" href="/nodejs/express-va-sails-cai-nao-tot-hon-phan-2#respond">0 Comments</a>
									</div>
									<!-- End of comments button -->
								</div>
								<div class="col-xs-12  col-sm-9">
									<!-- Start of social icons -->
									<div class="social-icons">
																			</div>
									<!-- End of social icons -->
								</div>
							</div>
							<div class="row">
								<div class="col-xs-12  push-down-60  col-sm-6">
									<!-- Start of post author -->
									<div class="post-author">
										<h6>Written By</h6>
										<hr>
										<img alt='' src='http://0.gravatar.com/avatar/92d8de5bc1aae1250a02b1f37b92751b?s=90&#038;d=mm&#038;r=g' srcset='http://0.gravatar.com/avatar/92d8de5bc1aae1250a02b1f37b92751b?s=180&amp;d=mm&amp;r=g 2x' class='avatar avatar-90 photo' height='90' width='90' />										<h5>
											<a href="/author/nlug">Minh Thành</a>
										</h5>
										<div class="post-author__text">
											<p>Tác giả bận chơi Dota 2 rồi lười viết cái dòng này lắm</p>
										</div>
									</div>
									<!-- End of post author -->
								</div>

																<div class="col-xs-12  col-sm-6  push-down-60">

									<!-- Start of post tags -->
									<div class="tags">
										<h6>Tags</h6>
										<hr>
										<a href="/tag/express" rel="tag">express</a><a href="/tag/sails" rel="tag">sails</a><a href="/tag/socket-io" rel="tag">socket.io</a><a href="/tag/webapp" rel="tag">webapp</a>									</div>

									<!-- End of post tags -->
								</div>
								
							</div>

							<!-- comments start -->
							
<div class="comments  push-down-30" id="comments">
	<h6>Comments</h6>
	<hr>

	<section class="comments-container">
		
			
			
					
					<h3 class="push-down-25">
						Leave a Comment					</h3>


					<div id="respond" class="comment-respond">
		<h3 id="reply-title" class="comment-reply-title"> <small><a rel="nofollow" id="cancel-comment-reply-link" href="/nodejs/express-va-sails-cai-nao-tot-hon-phan-2#respond" style="display:none;">Hủy</a></small></h3>			<form action="/wp-comments-post.php" method="post" id="commentform" class="comment-form" novalidate>
				<p class="push-down-15"><label for="message">Message <span class="warning">*</span></label><textarea class="form-control form-control--contact form-control--big" id="comment" name="comment" rows="7" aria-required="true" placeholder="Your Comment goes here." required></textarea></p><p class="push-down-15"><label for="author">Name <span class="warning">*</span><input class="form-control  form-control--contact" id="author" name="author" type="text" value="" size="30" aria-required='true' required /></label></p>
<p class="push-down-15"><label for="email">Email <span class="warning">*</span><input class="form-control  form-control--contact" id="email" name="email" type="email" value="" size="30" aria-required='true' required /></label></p>
<p class="push-down-15"><label for="url">Website <span class="warning">*</span><input class="form-control  form-control--contact" id="url" name="url" type="text" value="" size="30" /></label></p>
<p class="form-submit"><input name="submit" type="submit" id="submitWPComment" class="submit" value="Send now" /> <input type='hidden' name='comment_post_ID' value='151' id='comment_post_ID' />
<input type='hidden' name='comment_parent' id='comment_parent' value='0' />
</p><p style="display: none;"><input type="hidden" id="akismet_comment_nonce" name="akismet_comment_nonce" value="7bff891f8b" /></p><p style="display: none;"><input type="hidden" id="ak_js" name="ak_js" value="89"/></p>			</form>
			</div><!-- #respond -->
		</section>
</div>							<!-- comments end -->

							
						</div>
					</div>
				</article>

			
	</div>

	
	</div>
</div>


		<footer class="footer">
			<div class="container">
				<div class="row">
									</div>
			</div>
		</footer>
		<footer class="copyrights">
			<div class="container">
				<div class="row">
					<div class="col-xs-12  col-sm-6">
						Readable WP theme &copy; Copyright 2014					</div>
					<div class="col-xs-12  col-sm-6">
						<div class="copyrights--right">
							Made by <a href="http://www.proteusthemes.com/">ProteusThemes</a>						</div>
					</div>
				</div>
			</div>
		</footer>

	</div><!-- /.page-content-container -->

<script type='text/javascript' src='/wp-content/plugins/akismet/_inc/form.js?ver=3.2'></script>
<script type='text/javascript' src='/wp-content/plugins/contact-form-7/includes/js/jquery.form.min.js?ver=3.51.0-2014.06.20'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var _wpcf7 = {"recaptcha":{"messages":{"empty":"Please verify that you are not a robot."}}};
/* ]]> */
</script>
<script type='text/javascript' src='/wp-content/plugins/contact-form-7/includes/js/scripts.js?ver=4.6'></script>
<script type='text/javascript' src='http://s0.wp.com/wp-content/js/devicepx-jetpack.js?ver=201748'></script>
<script type='text/javascript' src='/wp-content/plugins/simple-code-highlighter/js/pretty.js?ver=4.8.3'></script>
<script type='text/javascript' src='/wp-includes/js/underscore.min.js?ver=1.8.3'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var ReadableVars = [];
/* ]]> */
</script>
<script type='text/javascript' src='/wp-content/themes/readable/assets/js/built.js?ver=1.0.0'></script>
<script type='text/javascript' src='/wp-includes/js/comment-reply.min.js?ver=4.8.3'></script>
<script type='text/javascript' src='/wp-includes/js/wp-embed.min.js?ver=4.8.3'></script>
<script type='text/javascript' src='http://stats.wp.com/e-201748.js' async defer></script>
<script type='text/javascript'>
	_stq = window._stq || [];
	_stq.push([ 'view', {v:'ext',j:'1:4.5',blog:'114130900',post:'151',tz:'7',srv:'cuthanh.com'} ]);
	_stq.push([ 'clickTrackerInit', '114130900', '151' ]);
</script>
<!-- W3TC-include-js-body-end -->
</body>
</html>